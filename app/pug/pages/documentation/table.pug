extends ../../config/template
append config
    -title = "Table"
    -description = "A table displays rows of data."
    -ogUrl = "/documentation/table.html"
    -template = 2

block main
    +codeBox(
        'Basic',
        'Simple table with actions.',
        '<div class="SnTable-wrapper">\n    <table class="SnTable">\n        <thead>\n            <tr>\n                <th>Column 1</th>\n                <th>Column 2</th>\n                <th>Column 3</th>\n                <th style="width: 100px"></th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>Row 1</td>\n                <td>Row 2</td>\n                <td>Row 3</td>\n                <td>\n                    <div class="SnTable-action">\n                        <div class="SnBtn">Update</div>\n                        <div class="SnBtn danger" onclick="onConfirmDelete()">Delete</div>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td>Row 1</td>\n                <td>Row 2</td>\n                <td>Row 3</td>\n                <td>\n                    <div class="SnTable-action">\n                        <div class="SnBtn">Update</div>\n                        <div class="SnBtn danger" onclick="onConfirmDelete()">Delete</div>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td>Row 1</td>\n                <td>Row 2</td>\n                <td>Row 3</td>\n                <td>\n                    <div class="SnTable-action">\n                        <div class="SnBtn">Update</div>\n                        <div class="SnBtn danger" onclick="onConfirmDelete()">Delete</div>\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</div>',
        "let onConfirmDelete = ()=>{\n    SnModal.confirm({\n        title: 'Are you sure delete this task?',\n        content: 'Some descriptions',\n        okText: 'Yes',\n        okType: 'danger',\n        cancelText: 'No',\n        onOk() {\n            console.log('onOk')\n        },\n        onCancel() {\n            console.log('onCancel')\n        }\n    });\n}\n"
    )
        .SnTable-wrapper
            table.SnTable
                thead
                    tr
                        th Column 1
                        th Column 2
                        th Column 3
                        th(style="width: 100px")
                tbody
                    tr
                        td Row 1
                        td Row 2
                        td Row 3
                        td
                            .SnTable-action
                                .SnBtn Update
                                .SnBtn.danger(onclick="onConfirmDelete()") Delete
                    tr
                        td Row 1
                        td Row 2
                        td Row 3
                        td
                            .SnTable-action
                                .SnBtn Update
                                .SnBtn.danger(onclick="onConfirmDelete()") Delete
                    tr
                        td Row 1
                        td Row 2
                        td Row 3
                        td
                            .SnTable-action
                                .SnBtn Update
                                .SnBtn.danger(onclick="onConfirmDelete()") Delete
        script.
            let onConfirmDelete = ()=>{
                SnModal.confirm({
                    title: 'Are you sure delete this task?',
                    content: 'Some descriptions',
                    okText: 'Yes',
                    okType: 'danger',
                    cancelText: 'No',
                    onOk() {
                        console.log('onOk')
                    },
                    onCancel() {
                        console.log('onCancel')
                    }
                });
            }
    +codeBox(
        'Footer',
        'Simple table with actions and footer.',
        '<div class="SnTable-wrapper">\n    <table class="SnTable">\n        <thead>\n            <tr>\n                <th>Column 1</th>\n                <th>Column 2</th>\n                <th>Column 3</th>\n                <th style="width: 100px"></th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>Row 1</td>\n                <td>Row 2</td>\n                <td>Row 3</td>\n                <td>\n                    <div class="SnTable-action">\n                        <div class="SnBtn">Update</div>\n                        <div class="SnBtn danger" onclick="onConfirmDelete()">Delete</div>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td>Row 1</td>\n                <td>Row 2</td>\n                <td>Row 3</td>\n                <td>\n                    <div class="SnTable-action">\n                        <div class="SnBtn">Update</div>\n                        <div class="SnBtn danger" onclick="onConfirmDelete()">Delete</div>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td>Row 1</td>\n                <td>Row 2</td>\n                <td>Row 3</td>\n                <td>\n                    <div class="SnTable-action">\n                        <div class="SnBtn">Update</div>\n                        <div class="SnBtn danger" onclick="onConfirmDelete()">Delete</div>\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n        <tfoot>\n            <tr>\n                <td>Rol 1</td>\n                <td>Rol 2</td>\n                <td>Rol 3</td>\n                <td> </td>\n            </tr>\n        </tfoot>\n    </table>\n</div>',
        "let onConfirmDelete = ()=>{\n    SnModal.confirm({\n        title: 'Are you sure delete this task?',\n        content: 'Some descriptions',\n        okText: 'Yes',\n        okType: 'danger',\n        cancelText: 'No',\n        onOk() {\n            console.log('onOk')\n        },\n        onCancel() {\n            console.log('onCancel')\n        }\n    });\n}\n"
    )
        .SnTable-wrapper
            table.SnTable
                thead
                    tr
                        th Column 1
                        th Column 2
                        th Column 3
                        th(style="width: 100px")
                tbody
                    tr
                        td Row 1
                        td Row 2
                        td Row 3
                        td
                            .SnTable-action
                                .SnBtn Update
                                .SnBtn.danger(onclick="onConfirmDelete()") Delete
                    tr
                        td Row 1
                        td Row 2
                        td Row 3
                        td
                            .SnTable-action
                                .SnBtn Update
                                .SnBtn.danger(onclick="onConfirmDelete()") Delete
                    tr
                        td Row 1
                        td Row 2
                        td Row 3
                        td
                            .SnTable-action
                                .SnBtn Update
                                .SnBtn.danger(onclick="onConfirmDelete()") Delete
                tfoot
                    tr
                        td Rol 1
                        td Rol 2
                        td Rol 3
                        td
    +codeBox(
        'Dynamic table',
        'Advanced table.',
        '<div class="dataTable></div>',
        "let onConfirmDelete = ()=>{\n    SnModal.confirm({\n        title: 'Are you sure delete this task?',\n        content: 'Some descriptions',\n        okText: 'Yes',\n        okType: 'danger',\n        cancelText: 'No',\n        onOk() {\n            console.log('onOk')\n        },\n        onCancel() {\n            console.log('onCancel')\n        }\n    });\n}\n"
    )
        div#dataTable
        script.
            window.onload = function(e){
                new SnTable({
                    elementId: 'dataTable',
                    entity: 'user',
                    url: '',
                    //- actions: appMenuActions,
                    columns: [
                        {
                            title: 'Fecha Registro',
                            field: 'register_datetime',
                            filterable: true,
                            sortable: true,
                            type: 'date',
                        },
                        {
                            title: 'Fecha Emisi√≥n',
                            field: 'date_of_issue',
                            filterable: true,
                            sortable: true,
                            type: 'date',
                        },
                        {
                            title: 'Fecha Vencimiento',
                            field: 'date_of_due',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            type: 'date',
                        },
                        {
                            title: 'Tipo Doc.',
                            field: 'document_type_id_description',
                            filterable: true,
                            sortable: true,
                        },
                        {
                            title: 'Documento',
                            field: 'document',
                            filterable: true,
                            sortable: true,
                        },
                        {
                            title: 'RUC / DNI / ETC',
                            field: 'document_number',
                            filterable: true,
                            sortable: true,
                        },
                        {
                            title: 'Denominaci√≥n',
                            field: 'social_reason',
                            filterable: true,
                            sortable: true,
                        },
                        {
                            title: 'Placa vehicular',
                            field: 'vehicle_plate',
                            filterable: true,
                            sortable: true,
                            visible: false,
                        },
                        {
                            title: 'Orden compra',
                            field: 'purchase_order',
                            filterable: true,
                            sortable: true,
                            visible: false,
                        },
                        {
                            title: 'Guia',
                            field: 'guide',
                            filterable: true,
                            sortable: true,
                            visible: false,
                        },
                        {
                            title: 'Observaci√≥n',
                            field: 'observation',
                            filterable: true,
                            sortable: true,
                            visible: false,
                        },
                        {
                            title: 'Gratuita',
                            field: 'total_free',
                            summaryOperator: 'sum',
                            type: 'number',
                            filterable: true,
                            sortable: true,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.total_free}`;
                            }
                        },
                        {
                            title: 'Exportacion',
                            field: 'total_exportation',
                            summaryOperator: 'sum',
                            type: 'number',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.total_exportation}`;
                            }
                        },
                        {
                            title: 'Descuento',
                            field: 'total_discount',
                            summaryOperator: 'sum',
                            type: 'number',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.total_discount}`;
                            }
                        },
                        {
                            title: 'Exonerado',
                            field: 'total_exonerated',
                            summaryOperator: 'sum',
                            type: 'number',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.total_exonerated}`;
                            }
                        },
                        {
                            title: 'Inafecto',
                            field: 'total_unaffected',
                            summaryOperator: 'sum',
                            type: 'number',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.total_unaffected}`;
                            }
                        },
                        {
                            title: 'Gravada',
                            field: 'total_taxed',
                            summaryOperator: 'sum',
                            type: 'number',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.total_taxed}`;
                            }
                        },
                        {
                            title: 'Total IGV',
                            field: 'total_igv',
                            summaryOperator: 'sum',
                            type: 'number',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.total_igv}`;
                            }
                        },
                        {
                            title: 'IGV factor',
                            field: 'tax_factor',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            customRender: (item) => {
                            return `${parseFloat(item.tax_factor || 0).toFixed(2)}`;
                            }
                        },
                        {
                            title: 'Otros car.',
                            field: 'total_charge',
                            summaryOperator: 'sum',
                            type: 'number',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.total_charge}`;
                            }
                        },
                        {
                            title: 'ICBPER',
                            field: 'total_plastic_bag_tax',
                            summaryOperator: 'sum',
                            type: 'number',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.total_plastic_bag_tax}`;
                            }
                        },
                        {
                            title: 'Vuelto',
                            field: 'returned',
                            summaryOperator: 'sum',
                            type: 'number',
                            filterable: true,
                            sortable: true,
                            visible: false,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.returned}`;
                            }
                        },
                        {
                            title: 'Total',
                            field: 'total',
                            type: 'number',
                            summaryOperator: 'sum',
                            filterable: true,
                            sortable: true,
                            customRender: (item) => {
                            return `${item.currency_id_symbol} ${item.total}`;
                            }
                        },
                        {
                            title: 'Correo',
                            field: 'email',
                            filterable: true,
                            sortable: true,
                            visible: false,
                        },
                        {
                            title: 'Celular',
                            field: 'phone',
                            filterable: true,
                            sortable: true,
                            visible: false,
                        },
                        {
                            title: 'Observaci√≥n',
                            field: 'observation',
                            filterable: true,
                            sortable: true,
                        },
                        {
                            title: 'Usuario',
                            field: 'user_id_user_name',
                            filterable: true,
                            sortable: true,
                        },
                        {
                            title: 'Metodo',
                            field: 'summary_payment_method_id_description',
                            filterable: true,
                            sortable: true,
                            // customRender: (item) => {
                            //   return item.summary_payment_method_id_description;
                            //   // return `<span><span class="SnBadge ${item.payment_form_id == '1' ? 'success' : 'warning'} SnMr-1"></span>${item.payment_form_id_description}</span>`;
                            // }
                        },
                        {
                            title: 'Pago',
                            field: 'payment_form_id_description',
                            filterable: true,
                            sortable: true,
                            customRender: (item) => {
                            return `<span><span class="SnBadge ${item.payment_form_id == '1' ? 'success' : 'warning'} SnMr-1"></span>${item.payment_form_id_description}</span>`;
                            }
                        },
                        {
                            title: 'Estado',
                            field: 'sale_state_id_description',
                            filterable: true,
                            sortable: true,
                            customRender: (item) => {
                                let color = '';
                                switch (`${item.sale_state_id}`) {
                                    case '1': // Anulado
                                        color = 'danger';
                                        break;
                                    case '2': // Pendiente
                                        color = 'danger';
                                        break;
                                    case '3': // Guardado
                                        color = 'primary';
                                        break;
                                    case '4': // Emitido
                                        color = 'success';
                                        break;
                                    case '6': // Excepcion de SUNAT
                                    case '8': // Rechazado
                                        color = 'danger';
                                        break;
                                    case '9': // Observaciones
                                        color = 'warning';
                                        break;
                                    default:
                                        break;
                                }
                                return `<span class="SnTag ${color} SnMr-1">${item.sale_state_id_description}</span>`;
                            }
                        },
                    ],
                    data: async (content) => {
                        console.log(content, 'CONTENT_REQUEST');
                        const response = await fetch('https://assets.paulantezana.com/sale.php', {
                            method: 'GET',
                        });
                        const responseJson = await response.json();
                        return responseJson.result;
                    },
                    onSelectChange: (that) => {

                    }
                })
            }

    h2 API
    .SnTable-wrapper
        table.SnTable.DocApiTable
            thead
                tr
                    th Property
                    th Class
            tbody
                tr
                    td Table
                    td
                        code .SnTable
                tr
                    td Wrapper
                    td
                        code .SnTable-wrapper
                tr
                    td Actions
                    td
                        code .SnTable-action
